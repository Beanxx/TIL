2022.07.25(Mon)

[TIL] Day62 <br/>
[SEB FE] Day63

## ğŸÂ ë²ˆë“¤ë§

: ì‚¬ìš©ìì—ê²Œ ì›¹ì•±ì„ ì œê³µí•˜ê¸° ìœ„í•œ íŒŒì¼ ë¬¶ìŒ ğŸ‘‰ ëª¨ë“ˆ ê°„ ì˜ì¡´ì„± ê´€ê³„ íŒŒì•… í›„ ê·¸ë£¹í™”í•˜ëŠ” ì‘ì—…

## ğŸ—‚Â Webpack

: ì—¬ëŸ¬ íŒŒì¼ â†’ í•˜ë‚˜ íŒŒì¼ë¡œ í•©ì³ì£¼ëŠ” ëª¨ë“ˆ ë²ˆë“¤ëŸ¬ë¡œ, í˜„ì¬ Front-end ì•± ë°°í¬ì— ê°€ì¥ ë§ì´ ì‚¬ìš©!

âœ¨Â **Webpack í•„ìš”í•œ Best ì´ìœ ëŠ”?** ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ë¹ ë¥¸ ë¡œë”© ì†ë„ & ë†’ì€ ì„±ëŠ¥ì„ ìœ„í•´!

â°Â **ëª¨ë“ˆ ë²ˆë“¤ëŸ¬**
: ê°ê°ì˜ ëª¨ë“ˆ(HTML, CSS, JS ë“±ì˜ ìì›)ì„ ì¡°í•©í•´ì„œ í•˜ë‚˜ì˜ ë¬¶ìŒìœ¼ë¡œ ë²ˆë“¤ë§(ë¹Œë“œ)í•˜ëŠ” ë„êµ¬

â°Â **Build**
: ê°œë°œ ì™„ë£Œ ì•± ë°°í¬ë¥¼ ìœ„í•´ í•˜ë‚˜ì˜ í´ë”ë¡œ êµ¬ì„±í•˜ì—¬ ì¤€ë¹„í•˜ëŠ” ì‘ì—…

<br/>

### ğŸ“Â Webpack ì†ì„±

1. **`Target`**: `Browser Compatibility`ì™€ ì—°ê´€ëœ ì†ì„±. [default-`web`]

1. **`Entry`**(= `Entry point`): ì‘ì„± ì½”ë“œ ì‹œì‘ì !
   - Webpackì´ ë‚´ë¶€ dependency graph ìƒì„±ì„ ìœ„í•´ ì‚¬ìš©í•´ì•¼ í•˜ëŠ” ëª¨ë“ˆ
     [default-`./src/index.js`]
1. **`Output`**: ìƒì„±ëœ ë²ˆë“¤ì„ ë‚´ë³´ë‚¼ ìœ„ì¹˜ & íŒŒì¼ ì´ë¦„ ì§€ì • ë°©ë²•ì„ webpackì— ì•Œë ¤ì£¼ëŠ” ì—­í• 
   - ê¸°ë³¸ ì¶œë ¥ íŒŒì¼ â†’ `./dist/main.js`
   - ìƒì„±ëœ ê¸°íƒ€ íŒŒì¼ â†’ `./dist`
     âœ‹Â `path` ì†ì„± ì‚¬ìš©ì‹œì—” `path` ëª¨ë“ˆ ì‚¬ìš©í•´ì•¼ í•¨
1. **`Loader`**: webpackì€ JS, JSON íŒŒì¼ë§Œ ì´í•´! â†’ Loader ì‚¬ìš©ì‹œ ë‹¤ë¥¸ ìœ í˜• íŒŒì¼ ì²˜ë¦¬ ê°€ëŠ¥
   - `test`: ë³€í™˜ì´ í•„ìš”í•œ íŒŒì¼ë“¤ ì‹ë³„ì„ ìœ„í•œ ì†ì„±
   - `use`: ë³€í™˜ ìˆ˜í–‰ì‹œ ì‚¬ìš©ë˜ëŠ” `Loader`ë¥¼ ê°€ë¦¬í‚¤ëŠ” ì†ì„±
   - `exclude`: `Babel`ë¡œ ì»´íŒŒì¼í•˜ì§€ ì•Šì„ íŒŒì¼ / í´ë” ì§€ì •
     â†”Â `include`: ë°˜ë“œì‹œ ì»´íŒŒì¼í•´ì•¼ í•  íŒŒì¼ / í´ë” ì§€ì •
1. **`Plugins`**: ë²ˆë“¤ ìµœì í™” / asset ê´€ë¦¬ / í™˜ê²½ë³€ìˆ˜ ì£¼ì… ë“± ê´‘ë²”ìœ„í•œ ì‘ì—… ìˆ˜í–‰ ê°€ëŠ¥
   a. `require()`ë¥¼ í†µí•´ ë¨¼ì € í”ŒëŸ¬ê·¸ì¸ ìš”ì²­í•˜ê¸°
   b. `plugins` ë°°ì—´ì— ì‚¬ìš©í•˜ê³ ì í•˜ëŠ” í”ŒëŸ¬ê·¸ì¸ ì¶”ê°€í•˜ê¸°

   - `new` ì—°ì‚°ìë¡œ í˜¸ì¶œ â†’ Plugin Instance ìƒì„±í•´ì¤˜ì•¼ í•¨!

   - `html-webpack-plugin`: ìƒì„±ëœ ëª¨ë“  ë²ˆë“¤ ìë™ ì‚½ì… â†’ ì•±ìš© HTML íŒŒì¼ ìƒì„±
   - `mini-css-extract-plugin`: CSS ë³„ë„ íŒŒì¼ ì¶”ì¶œ â†’ CSS í¬í•¨í•˜ëŠ” JS íŒŒì¼ ë‹¹ CSS íŒŒì¼ ì‘ì„±í•´ì£¼ê²Œë” ì§€ì›

1. **`Optimization`**: ì„ íƒí•œ í•­ëª©ì— ë”°ë¼ ìµœì í™” ì‹¤í–‰
   - `minimize`: `TerserPlugin` / `optimization.minimize`ì— ëª…ì‹œëœ plugins
     - bundle íŒŒì¼ì„ ìµœì†Œí™”(ì••ì¶•)ì‹œí‚¤ëŠ” ì‘ì—… ì—¬ë¶€ ê²°ì •
   - `minimizer`: `TerserPlugin` ì¸ìŠ¤í„´ìŠ¤ ì œê³µí•´ì„œ ì¬ì •ì˜ ê°€ëŠ¥

<br/>

### ğŸ“Â Webpack ì‚¬ìš©í•˜ê¸°

> agora-states-referenceì— ì ìš©í•´ë³´ê¸° ğŸ™Œ

1. `Directory` ìƒì„±
2. `npm init -y`
3. `script.js` íŒŒì¼ ìƒì„±
   a. data.js ì¦‰, ë°ì´í„° íŒŒì¼ ì½”ë“œ ë§ˆì§€ë§‰ì— `module.exports = agoraStatesDiscussions;` ì½”ë“œ ì¶”ê°€
   b. script.jsì—ì„œ `const agoraStatesDiscussions = require("./data.js");` ì½”ë“œ ì¶”ê°€í•´ì„œ ë°ì´í„° ë¶ˆëŸ¬ì˜¤ê¸°!
4. `Webpack` ì„¤ì¹˜

   ```bash
   $ npm install -D webpack webpack-cli
   ```

5. `Webpack config` íŒŒì¼ ì‘ì„±

   ```jsx
   // webpack.config.js
   const path = require("path");

   module.exports = {
     entry: "./script.js",
     output: {
       path: path.resolve(__dirname, "dist"),
       filename: "app.bundle.js",
     },
   };
   ```

6. ë²ˆë“¤ë§í•˜ê¸°

   ```bash
   $ npm webpack
   ```

7. `npm run build` ì„¤ì •

   ```json
   // package.json

   "scripts": {
       "build": "webpack", // ìš”ê¸° ì½”ë“œ ì¶”ê°€!
       "test": "echo \"Error: no test specified\" && exit 1"
     },
   ```

8. index.html íŒŒì¼ ì½”ë“œ ìˆ˜ì •

   ```html
   <!-- index.html -->

   <script src="data.js"></script>
   <script src="script.js"></script>

   <!-- ê¸°ì¡´ì˜ ìœ„ ì½”ë“œëŠ” ì§€ìš°ê³  ì•„ë˜ ì½”ë“œë¥¼ ì¶”ê°€í•˜ì—¬ ë²ˆë“¤ íŒŒì¼ê³¼ ì—°ê²°í•´ì£¼ê¸°! -->

   <script src="app.bundle.js"></script>
   ```

9. `style-loader`, `css-loader` ì„¤ì¹˜ â†’ css style ì ìš©

   ```bash
   $ npm i -D css-loader style-loader
   ```

   ```jsx
   // webpack.config.js rules ì¶”ê°€!

   module: {
       rules: [
         {
           // íŒŒì¼ëª…ì´ .cssë¡œ ëë‚˜ëŠ” ëª¨ë“  íŒŒì¼ì— ì ìš©
           test: /\.css$/, // .cssë¡œ íŒŒì¼ëª…ì´ ëë‚˜ëŠ” ëª¨ë“  íŒŒì¼ì— ì ìš©
           use: ["style-loader", "css-loader"], // ë°°ì—´ ë‚´ì—ì„œ <- ìˆœìœ¼ë¡œ ì ìš©
           exclude: /node_modules/, // loaderê°€ node_modules ë‚´ìš©ë„ ì²˜ë¦¬í•˜ë¯€ë¡œ ì–œ ì œì™¸í•´ì•¼ í•¨
         },
       ],
     },
   ```

   ```jsx
   // script.js

   // css íŒŒì¼ ì—°ê²°í•´ì£¼ê¸°
   require("./style.css");

   // ì´í›„ index.htmlì˜ <link rel="stylesheet" href="../style.css"> ì½”ë“œ ì—†ì• ë„ style ì˜ ì ìš©ë¨!
   ```

10. `html-webpack-plugin` ì„¤ì¹˜

    ```bash
    $ npm i -D html-webpack-plugin
    ```

    ```jsx
    // ìµœì¢… webpack.config.js
    const path = require("path");
    const HtmlWebpackPlugin = require("html-webpack-plugin");

    module.exports = {
      entry: "./script.js",
      output: {
        path: path.resolve(__dirname, "dist"),
        filename: "app.bundle.js",
      },
      module: {
        rules: [
          {
            test: /\.css$/,
            use: ["style-loader", "css-loader"],
            exclude: /node_modules/,
          },
        ],
      },
      // html-webpack-plugin ì ìš© ë¶€ë¶„
      plugins: [
        new HtmlWebpackPlugin({
          template: path.resolve(__dirname, "index.html"),
        }),
      ],
    };
    ```

11. ë§ˆì§€ë§‰ìœ¼ë¡œ `npm run build` ë‹¤ì‹œ í•´ì£¼ë©´ ë~!

12. Github ë ˆí¬ì§€í† ë¦¬ ìƒì„± í›„ dist í´ë” ì´ë¦„ì„ docsë¡œ ë³€ê²½ í›„,
    `app.bundle.js` & `index.html` ë‘ íŒŒì¼ë§Œ ì—…ë¡œë“œ í›„ github pageì— ë°°í¬í•˜ë©´ ë°ì´í„°ê¹Œì§€ ì˜ ë‚˜ì˜´!!

<br/>

<img width="952" alt="á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2022-07-25 á„‹á…©á„’á…® 5 48 19" src="https://user-images.githubusercontent.com/64299610/181008366-956d5c51-ee1a-43f8-96b9-fc3e97ac45c9.png">

<br/>

âœ¨Â ë°°í¬ ì„±ê³µ ğŸ™ŒÂ  [https://beanxx.github.io/fe-sprint-webpack/](https://beanxx.github.io/fe-sprint-webpack/)
